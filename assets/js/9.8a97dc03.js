(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{208:function(s,a,t){"use strict";t.r(a);var n=t(28),e=Object(n.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"使用-git-rebase-合并多个-commit"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#使用-git-rebase-合并多个-commit"}},[s._v("#")]),s._v(" 使用 git rebase 合并多个 commit")]),s._v(" "),t("p",[s._v("日常开发或者参与开源项目时我们常常有这种情况：")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("~ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" log\n\ncommit abasdlkj"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\n    feat"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("xxx"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(": 修复细节1"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\n\ncommit aksdhkja"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\n    feat"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("xxx"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(": 修复细节2"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\ncommit ajhsdhdh"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\n    feat"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("xxx"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(": 支持xxx功能"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br")])]),t("p",[s._v("面对多个 commit 只为解决一个需求或 bug 时候如果直接 merge 到主分支上的话会导致主分支的 git 操作日志非常混乱，如果遇到需要代码回滚情况时根本不知道哪个 commit 做了什么，甚至在开源项目中对于后来想要参与的开发人员来说只能硬着头皮把最新的代码啃下来。")]),s._v(" "),t("p",[s._v("这里介绍一下 "),t("code",[s._v("git rebase")]),s._v(" 指令去如何合并多个 commit，也希望大家能在日常开发中尽量做到规范化（尤其是面向开源的项目）。")]),s._v(" "),t("h3",{attrs:{id:"_1-查看提交历史-git-log"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-查看提交历史-git-log"}},[s._v("#")]),s._v(" 1 查看提交历史: git log")]),s._v(" "),t("p",[s._v("首先你要知道自己想合并的是哪几个提交，可以使用git log命令来查看提交历史，假如最近4条历史如下：")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("commit 3ca6ec340edc66df13423f36f52919dfa3"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("\n\ncommit 1b4056686d1b494a5c86757f9eaed844"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("\n\ncommit 53f244ac8730d33b353bee3b24210b07"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("\n\ncommit 3a4226b4a0b6fa68783b07f1cee7b688"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br")])]),t("h3",{attrs:{id:"_2-git-rebase"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-git-rebase"}},[s._v("#")]),s._v(" 2 git rebase")]),s._v(" "),t("p",[s._v("想要合并1-3条，有两个方法")]),s._v(" "),t("ol",[t("li",[s._v("从HEAD版本开始往过去数3个版本")])]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" rebase -i HEAD~3\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("ol",{attrs:{start:"2"}},[t("li",[s._v("指名要合并的版本之前的版本号")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("git rebase -i 3a4226b\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h3",{attrs:{id:"_3-选取要合并的提交"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-选取要合并的提交"}},[s._v("#")]),s._v(" 3 选取要合并的提交")]),s._v(" "),t("ol",[t("li",[s._v("执行了rebase命令之后，会弹出一个窗口，头几行如下：")])]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("pick 3ca6ec3   "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'注释**********'")]),s._v("\n\npick 1b40566   "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'注释*********'")]),s._v("\n\npick 53f244a   "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'注释**********'")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("ol",{attrs:{start:"2"}},[t("li",[s._v("将pick改为squash或者s,之后保存并关闭文本编辑窗口即可。\n"),t("ul",[t("li",[s._v("pick 的意思是要会执行这个 commit")]),s._v(" "),t("li",[s._v("squash 的意思是这个 commit 会被合并到前一个commit\n改完之后文本内容如下：")])])])]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("pick 3ca6ec3   "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'注释**********'")]),s._v("\n\ns 1b40566   "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'注释*********'")]),s._v("\n\ns 53f244a   "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'注释**********'")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("p",[s._v("然后输入:wq以保存并退出。")]),s._v(" "),t("ol",{attrs:{start:"3"}},[t("li",[s._v("然后保存退出，Git会压缩提交历史，如果有冲突，需要修改，修改的时候要注意，保留最新的历史，不然我们的修改就丢弃了。修改以后要记得敲下面的命令：")])]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v("  \n\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" rebase --continue  \n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("p",[s._v("如果你想放弃这次合并的话，执行以下命令：")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" rebase --abort  \n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("ol",{attrs:{start:"4"}},[t("li",[s._v("如果没有冲突，或者冲突已经解决，则会出现如下的编辑窗口：")])]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# This is a combination of 4 commits.  ")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#The first commit’s message is:  ")]),s._v("\n注释"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# The 2nd commit’s message is:  ")]),s._v("\n注释"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# The 3rd commit’s message is:  ")]),s._v("\n注释"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br")])]),t("ol",{attrs:{start:"5"}},[t("li",[s._v("输入wq保存并推出, 再次输入git log查看 commit 历史信息，你会发现这两个 commit 已经合并了。")])]),s._v(" "),t("h3",{attrs:{id:"_4-推向远端"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-推向远端"}},[s._v("#")]),s._v(" 4 推向远端")]),s._v(" "),t("p",[s._v("如果这个分支之前已经推上过远端的话，此时需要使用 "),t("code",[s._v("git push origin xxx -f")]),s._v(" 去覆盖 git 历史。")])])}),[],!1,null,null,null);a.default=e.exports}}]);